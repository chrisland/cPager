function cPager(t){if(this._page,this._open=0,this._lastopen=0,this._history=[],this._opt={handler:"pageBtn",tmplPath:"tmpl",displayStyle:"block",offButton:"pageBtnOffline",container:"page",start:!1},t)for(var e in t)t.hasOwnProperty(e)&&(this._opt[e]=t[e]);if(this._page=document.getElementById(this._opt.container),!this._page)throw new Error("missing main container #"+this._opt.container);return this.ajaxCache={},this._lastopen?this["switch"](this._lastopen):this._opt.start&&this["switch"](this._opt.start),this}cPager.prototype["switch"]=function(t,e,s){return this["switch"].task=this._h.changeContent(null,e,s,t,this),this["switch"].task&&this._h.switchDom(this,t,e,s),this},cPager.prototype.events=function(){for(var t=this,e=function(){if(this.classList.contains(t._opt.offButton))return!1;var e=this.getAttribute("data-page"),s=this.getAttribute("data-task"),n=this.getAttribute("data-content");if(e||s){if(t._open==e)return!1;t["switch"](e,s,n)}},s=document.getElementsByClassName(this._opt.handler),n=0;n<s.length;n++)s[n].style.curser="pointer",s[n].addEventListener("click",e);return!0},cPager.prototype.getHistory=function(){return this._history?this._history:!1},cPager.prototype.removeHistory=function(t){return t&&!isNaN(t)&&this._history.length>0&&(this._history=this._history.slice(0,this._history.length-t)),!0},cPager.prototype.addHistory=function(t,e,s){if(t){var n={id:t,task:e,content:s};return this._history.push(n),!0}return!1},cPager.prototype._h={changeContent:function(t,e,s,n,i){if("back"==e){var r=2,o=i.getHistory(),a=o[o.length-r];return a?(a.id&&(i["switch"](a.id,a.task,a.content),i.removeHistory(r)),!0):!1}return i._opt.tasks&&i._opt.tasks[e]?i._opt.tasks[e](n,s,t,i._page):!0},switchSuccess:function(t,e,s,n){"function"==typeof t["switch"].task&&t["switch"].task(),t.events(),t.addHistory(e,s,n)},ajaxSuccess:function(t,e,s,n,i){this.switchDom.response=t,i._page.innerHTML=t,i._lastopen=i._open,i._open=e,this.switchSuccess(i,e,s,n)},ajax:function(t,e,s,n,i){var r=this;t.ajaxCache[e]?r.ajaxSuccess(t.ajaxCache[e],s,n,i,t):this.sendRequest(e,function(o){t.ajaxCache[e]=o.responseText,r.ajaxSuccess(o.responseText,s,n,i,t)})},switchDom:function(t,e,s,n){return e&&this.ajax(t,"./"+t._opt.tmplPath+"/"+e+".tpl",e,s,n),!1},sendRequest:function(t,e,s){function n(){for(var t=!1,e=0;e<i.length;e++){try{t=i[e]()}catch(s){continue}break}return t}var i=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],r=n();if(r){var o=s?"POST":"GET";r.open(o,t,!0),r.setRequestHeader("User-Agent","XMLHTTP/1.0"),s&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4==r.readyState&&(200==r.status||304==r.status)&&e(r)},4!=r.readyState&&r.send(s)}}};