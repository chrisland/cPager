function cPager(t){if(this._page,this._open=0,this._lastopen=0,this._history=[],this._opt={handler:"pageBtn",tmplPath:"tmpl",displayStyle:"block",offButton:"pageBtnOffline",container:"page",start:!1},t)for(var s in t)t.hasOwnProperty(s)&&(this._opt[s]=t[s]);if(this._page=document.getElementById(this._opt.container),!this._page)throw new Error("missing main container #"+this._opt.container);return this.ajaxCache={},this._lastopen?this["switch"](this._lastopen):this._opt.start&&this["switch"](this._opt.start),this}cPager.prototype["switch"]=function(t,s,e){return this["switch"].task=this._h.changeContent(null,s,e,t,this),this["switch"].task&&this._h.switchDom(this,t,s,e),this},cPager.prototype.events=function(){for(var t=this,s=function(){if(this.classList.contains(t._opt.offButton))return!1;var s=this.getAttribute("data-page"),e=this.getAttribute("data-task"),i=this.getAttribute("data-content");if(s||e){if(t._open==s)return!1;t["switch"](s,e,i)}},e=document.getElementsByClassName(this._opt.handler),i=0;i<e.length;i++)e[i].style.curser="pointer",e[i].addEventListener("click",s);return!0},cPager.prototype.getHistory=function(){return this._history?this._history:!1},cPager.prototype.removeHistory=function(t){return t&&!isNaN(t)&&this._history.length>0&&(this._history=this._history.slice(0,this._history.length-t)),!0},cPager.prototype.addHistory=function(t,s,e){if(t){var i={id:t,task:s,content:e};return this._history.push(i),!0}return!1},cPager.prototype._h={changeContent:function(t,s,e,i,n){if("back"==s){var a=2,o=n.getHistory(),r=o[o.length-a];return r?(r.id&&(n["switch"](r.id,r.task,r.content),n.removeHistory(a)),!0):!1}return n._opt.tasks&&n._opt.tasks[s]?n._opt.tasks[s](i,e,t,n._page):!0},switchSuccess:function(t,s,e,i){"function"==typeof t["switch"].task&&t["switch"].task(),t.events(),t.addHistory(s,e,i)},ajaxSuccess:function(t,s,e,i,n){this.switchDom.response=t,n._page.innerHTML=t,n._lastopen=n._open,n._open=s,this.switchSuccess(n,s,e,i)},ajax:function(t,s,e,i,n){var a=this;if(t.ajaxCache[s])a.ajaxSuccess(t.ajaxCache[s],e,i,n,t);else{var o=new XMLHttpRequest;o.open("POST",s,!0),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&(t.ajaxCache[s]=o.responseText,a.ajaxSuccess(o.responseText,e,i,n,t))},o.send()}},switchDom:function(t,s,e,i){return s&&this.ajax(t,t._opt.tmplPath+"/"+s+".tpl",s,e,i),!1}};