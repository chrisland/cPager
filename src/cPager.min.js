/*! cPager  0.1.0 2015-10-08 */
function cPager(a){if(this._page,this._open=0,this._lastopen=0,this._history=[],this._opt={handler:"pageBtn",tmplPath:"tmpl",displayStyle:"block",offButton:"pageBtnOffline",container:"page",start:!1},a)for(var b in a)a.hasOwnProperty(b)&&(this._opt[b]=a[b]);if(this._page=document.getElementById(this._opt.container),!this._page)throw new Error("missing main container #"+this._opt.container);return this._lastopen?this["switch"](this._lastopen):this._opt.start&&this["switch"](this._opt.start),this}cPager.prototype["switch"]=function(a,b,c){return this["switch"].task=this._h.changeContent(null,b,c,a,this),this["switch"].task&&this._h.switchDom(this,a,b,c),this},cPager.prototype.events=function(){for(var a=this,b=function(b){if(this.classList.contains(a._opt.offButton))return!1;var c=this.getAttribute("data-page"),d=this.getAttribute("data-task"),e=this.getAttribute("data-content");if(c||d){if(a._open==c)return!1;a["switch"](c,d,e)}},c=document.getElementsByClassName(this._opt.handler),d=0;d<c.length;d++)c[d].style.curser="pointer",c[d].addEventListener("click",b);return!0},cPager.prototype.getHistory=function(){return this._history?this._history:!1},cPager.prototype.removeHistory=function(a){return a&&!isNaN(a)&&this._history.length>0&&(this._history=this._history.slice(0,this._history.length-a)),!0},cPager.prototype.addHistory=function(a,b,c){if(a){var d={id:a,task:b,content:c};return this._history.push(d),!0}return!1},cPager.prototype._h={changeContent:function(a,b,c,d,e){if("back"==b){var f=2,g=e.getHistory(),h=g[g.length-f];return h?(h.id&&(e["switch"](h.id,h.task,h.content),e.removeHistory(f)),!0):!1}return e._opt.tasks&&e._opt.tasks[b]?e._opt.tasks[b](d,c,a,e._page):!0},switchSuccess:function(a,b,c,d){"function"==typeof a["switch"].task&&a["switch"].task(),a.events(),a.addHistory(b,c,d)},ajaxSuccess:function(a,b,c,d,e){this.switchDom.response=a,e._page.innerHTML=a,e._lastopen=e._open,e._open=b,this.switchSuccess(e,b,c,d)},ajax:function(a,b,c,d,e){var f=this,g=new XMLHttpRequest;g.open("POST",b,!0),g.onreadystatechange=function(){4==g.readyState&&200==g.status&&f.ajaxSuccess(g.responseText,c,d,e,a)},g.send()},switchDom:function(a,b,c,d){return b&&this.ajax(a,a._opt.tmplPath+"/"+b+".tpl",b,c,d),!1}};